#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# è·å–å½“å‰åˆ†æ”¯åç§°
current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

# æ£€æŸ¥æ˜¯å¦æ­£åœ¨æ¨é€åˆ° main æˆ– master åˆ†æ”¯
protected_branches="^(main|master)$"

if [[ "$current_branch" =~ $protected_branches ]]; then
    echo "ğŸš« é”™è¯¯: ä¸å…è®¸ç›´æ¥ push åˆ° ${current_branch} åˆ†æ”¯ï¼"
    echo "è¯·ä½¿ç”¨ Pull Request æµç¨‹ï¼š"
    echo "  1. åˆ‡æ¢åˆ°å¼€å‘åˆ†æ”¯: git checkout dev"
    echo "  2. æ¨é€åˆ°å¼€å‘åˆ†æ”¯: git push origin dev"
    echo "  3. é€šè¿‡ PR åˆå¹¶åˆ° ${current_branch} åˆ†æ”¯"
    exit 1
fi

npm run test





